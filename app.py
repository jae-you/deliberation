import streamlit as st
import pandas as pd
import plotly.express as px

# 1. í˜ì´ì§€ í™˜ê²½ ì„¤ì • [cite: 1318]
st.set_page_config(page_title="ëª¨ë‘ì˜ AI ê³µë¡ ì¥", layout="wide")

# ê°•ì¡° ê¸°í˜¸(**) ì—†ì´ ê¹”ë”í•œ ìŠ¤íƒ€ì¼ ì ìš©
st.markdown("""
    <style>
    .main { background-color: #f5f7f9; }
    .stTabs [data-baseweb="tab-list"] { gap: 24px; }
    .stTabs [data-baseweb="tab"] { height: 50px; white-space: pre-wrap; font-weight: 600; }
    </style>
    """, unsafe_allow_html=True)

# 2. ì‚¬ì´ë“œë°”: ìš´ì˜ ì£¼ì²´ ë° ê±°ë²„ë„ŒìŠ¤ ì •ë³´ [cite: 1266, 1267]
with st.sidebar:
    st.title("ëª¨ë‘ì˜ AI ê³µë¡ ì¥")
    st.caption("ìš´ì˜: ê³¼í•™ê¸°ìˆ ì •ë³´í†µì‹ ë¶€ / êµ­ê°€AIì „ëµìœ„ì›íšŒ")
    st.divider()
    
    selected_issue = st.selectbox(
        "í˜„ì¬ ìˆ™ì˜ ìŠ¤í”„ë¦°íŠ¸",
        ["AI ì—…ì¢… ì£¼ 52ì‹œê°„ì œ íŠ¹ë¡€ ë„ì…", "AI í•™ìŠµë°ì´í„° ì €ì‘ê¶Œ ë°°ë¶„ ëª¨ë¸", "ê³µê³µë¶€ë¬¸ AI ë„ì… ì±…ì„ ì†Œì¬"]
    )
    st.write("ì§„í–‰ ë‹¨ê³„: ìˆ™ì˜ ë° ëŒ€ì•ˆ ì¡°í•© (3ì£¼ì°¨)") # [cite: 1348]

# 3. ë©”ì¸ íƒ­ êµ¬ì„±: ì œì•ˆ -> ìˆ™ì˜ -> ì‹¤ì¦ -> ì •ì±…í™” [cite: 43, 1273, 1292]
tabs = st.tabs(["ğŸ›ï¸ ìŸì  ì •ì˜", "ğŸ—£ï¸ ë‹¤ì¸µ ìˆ™ì˜", "ğŸ§ª ì‹¤ì¦ íŒŒì´í”„ë¼ì¸", "ğŸ“‚ ì •ì±… ì•„ì¹´ì´ë¸Œ"])

# --- TAB 1: ìŸì  ì •ì˜ (AI ì „í™˜ ìœ„í—˜/ê¸°íšŒ ë°ì´í„°) [cite: 1287, 1308, 1327] ---
with tabs[0]:
    st.header(f"ğŸ“ {selected_issue}")
    st.subheader("ìŸì  ì¹´ë“œ: ì„ íƒì§€ì™€ íŠ¸ë ˆì´ë“œì˜¤í”„")
    
    col1, col2 = st.columns(2)
    with col1:
        st.info("ì˜µì…˜ A: íŠ¹ë¡€ ë„ì…\n\n- í˜ì‹  ì†ë„ ê°€ì†í™”\n- ê¸€ë¡œë²Œ ê²½ìŸë ¥ í™•ë³´")
    with col2:
        st.warning("ì˜µì…˜ B: í˜„í–‰ ìœ ì§€\n\n- ë…¸ë™ì ê±´ê°•ê¶Œ ë³´í˜¸\n- ì‚¬íšŒì  ì•ˆì „ë§ ìœ ì§€")
    
    st.write("ëˆ„ê°€ ê°ˆë“±í•˜ëŠ”ê°€? (ì´í•´ê´€ê³„ì ì§€ë„)") # [cite: 1331]
    st.image("https://via.placeholder.com/800x200.png?text=Stakeholder+Conflict+Map")

# --- TAB 2: ë‹¤ì¸µ ìˆ™ì˜ (ì˜¨ë¼ì¸ ì°¸ì—¬ + í¬ëŸ¼) [cite: 47, 97, 1336, 1351] ---
with tabs[1]:
    col_input, col_viz = st.columns([1, 1])
    
    with col_input:
        st.subheader("ìˆ™ì˜ ì°¸ì—¬ (ì¡°ê±´ë¶€ í•©ì˜ ìˆ˜ì§‘)")
        with st.form("deliberation_form"):
            # ë‹¨ìˆœ ì°¬ë°˜ì´ ì•„ë‹Œ ì¡°ê±´ë¶€ ì…ì¥ ìˆ˜ì§‘ [cite: 1337]
            position = st.radio("ì…ì¥", ["ì°¬ì„±", "ë°˜ëŒ€", "ìœ ë³´"], horizontal=True)
            
            st.write("ì´ ì¡°ê±´ì´ ì¶©ì¡±ëœë‹¤ë©´ ìˆ˜ìš©í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (ì¤‘ë³µ ì„ íƒ)") # [cite: 1340]
            c1 = st.checkbox("ì—°ì† íœ´ì‹ ì‹œê°„ ì˜ë¬´í™”")
            c2 = st.checkbox("ì¶”ê°€ ê·¼ë¡œì— ëŒ€í•œ ê³ ìœ¨ ìˆ˜ë‹¹ ë³´ì¥")
            c3 = st.checkbox("í•œì‹œì  ë„ì… í›„ ì„±ê³¼ ê²€ì¦")
            
            concerns = st.multiselect("ìš°ë ¤ ìœ í˜•", ["ê±´ê°•ê¶Œ", "ê³µì •ì„±", "ë°ì´í„° ë³´ì•ˆ", "ì±…ì„ ì†Œì¬"]) # [cite: 1341]
            opinion = st.text_area("ê·¼ê±° ë° ì œì•ˆì‚¬í•­ (ê²½í—˜ ê¸°ë°˜)") # [cite: 1342]
            
            if st.form_submit_button("ì˜ê²¬ ì œì¶œ"):
                st.success("ì˜ê²¬ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. AIê°€ ë¶„ì„í•˜ì—¬ ë¦¬í¬íŠ¸ì— ë°˜ì˜í•©ë‹ˆë‹¤.")

    with col_viz:
        st.subheader("ì‹¤ì‹œê°„ ìˆ™ì˜ ë°ì´í„° ë¶„ì„ (AI)") # [cite: 1289, 1333]
        # ìƒ˜í”Œ ë°ì´í„° ì‹œê°í™”
        df = pd.DataFrame({
            "ì¡°ê±´": ["ì—°ì†íœ´ì‹", "ê³ ìœ¨ìˆ˜ë‹¹", "í•œì‹œë„ì…"],
            "í•©ì˜ë„": [75, 60, 85]
        })
        fig = px.bar(df, x="ì¡°ê±´", y="í•©ì˜ë„", title="ì¡°ê±´ë³„ í•©ì˜ ê°€ëŠ¥ì„±(%)")
        st.plotly_chart(fig, use_container_width=True)

# --- TAB 3: ì‹¤ì¦ íŒŒì´í”„ë¼ì¸ (2026 5ê±´ ì‹¤ì¦) [cite: 1291, 1359, 1420] ---
with tabs[2]:
    st.subheader("ê³µë¡  ê²°ê³¼ ê¸°ë°˜ ì‹¤ì¦ í”„ë¡œì íŠ¸ (PoC)")
    st.write("ìˆ™ì˜ ê²°ê³¼ë¥¼ ì‹¤ì œ í˜„ì¥ì— ì ìš©í•˜ì—¬ ì •ì±… ì‹¤íš¨ì„±ì„ ê²€ì¦í•©ë‹ˆë‹¤.") 
    
    poc_df = pd.DataFrame([
        {"ìœ í˜•": "ë…¸ë™/ì‚°ì—…", "ê³¼ì œëª…": "AI ê°œë°œì ì—°ì†íœ´ì‹ì œ íš¨ê³¼ ê²€ì¦", "ìƒíƒœ": "ì‹¤í–‰ ì¤‘", "ì˜ˆì‚°": "2ì²œë§Œì›"},
        {"ìœ í˜•": "ì°½ì‘/ì €ì‘ê¶Œ", "ê³¼ì œëª…": "í•™ìŠµë°ì´í„° ìˆ˜ìµë°°ë¶„ ëª¨ë¸ PoC", "ìƒíƒœ": "ì¤€ë¹„ ì¤‘", "ì˜ˆì‚°": "2ì²œë§Œì›"},
        {"ìœ í˜•": "ëŒë´„/ê¸°ìˆ ", "ê³¼ì œëª…": "AI ë„êµ¬ ë„ì… í˜„ì¥ í”„ë¡œí† ì½œ ì‹¤í—˜", "ìƒíƒœ": "ì˜ì œ ì„ ì •", "ì˜ˆì‚°": "-"}
    ])
    st.table(poc_df) # [cite: 1439, 1477]

# --- TAB 4: ì •ì±… ì•„ì¹´ì´ë¸Œ (í™˜ë¥˜ ë° ì •ì±…í™”) [cite: 1274, 1310, 1384] ---
with tabs[3]:
    st.subheader("ì •ë¶€ ë‹µë³€ ë° ì •ì±… í™˜ë¥˜ ë¦¬í¬íŠ¸")
    
    st.markdown("ìˆ˜ë ´ëœ ëª¨ë“  ì˜ê²¬ì— ëŒ€í•´ ì •ë¶€ëŠ” ìˆ˜ìš©/ë¶€ë¶„ìˆ˜ìš©/ë¶ˆìˆ˜ìš© ì‚¬ìœ ë¥¼ ëª…ì‹œí•©ë‹ˆë‹¤.") 
    
    with st.expander("âœ… ì™„ë£Œëœ ê³µë¡ ì¥: ê³µê³µë¶€ë¬¸ AI ì±—ë´‡ ì±…ì„ ê°€ì´ë“œë¼ì¸"):
        st.write("ìˆ˜ìš© ì—¬ë¶€: ë¶€ë¶„ ìˆ˜ìš©")
        st.write("ì‚¬ìœ : ì‹œë¯¼ ìˆ™ì˜ ê²°ê³¼ ë„ì¶œëœ 'ê°œë°œì‚¬-ìš´ì˜ì‚¬ ê³µë™ ì±…ì„ì œ'ë¥¼ ì‹œí–‰ë ¹ ì œ3ì¡°ì— ë°˜ì˜í•¨.")
        st.caption("ì‘ì„±ì¼: 2026. 02. 15. / ê³¼ê¸°ì •í†µë¶€ ë‹´ë‹¹ë¶€ì„œ")